<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Carousel</title>
</head>

<body>

    <div id="carousel">
        <div id="carousel-items"></div>
        <button id="prev" disabled>Indietro</button>
        <button id="next">Avanti</button>
    </div>

    <script>
        let currentPage = 1;
        let totalPages = 1;
        const itemsPerPage = 3;

        function loadData(page) {
            fetch(`https://guido.ct.ws/recensioni/return.php?page=${page}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.error) {
                        console.error('API Error:', data.error);
                        return;
                    }

                    const carouselItems = document.getElementById('carousel-items');
                    carouselItems.innerHTML = ''; // Clear current items

                    data.data.forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.textContent = `${item.user_type} - ${item.comment} (Rating: ${item.rating})`;
                        carouselItems.appendChild(itemDiv);
                    });

                    const totalPages = data.pagination.total_pages;
                    const currentPage = data.pagination.current_page;

                    // Enable/disable buttons based on pagination
                    document.getElementById('prev').disabled = currentPage <= 1;
                    document.getElementById('next').disabled = currentPage >= totalPages;
                })
                .catch(error => {
                    console.error('Error loading data:', error);
                });
        }



        // Event listeners for buttons
        document.getElementById('prev').addEventListener('click', () => {
            if (currentPage > 1) {
                loadData(currentPage - 1);
            }
        });

        document.getElementById('next').addEventListener('click', () => {
            if (currentPage < totalPages) {
                loadData(currentPage + 1);
            }
        });

        loadData(currentPage);
    </script>

</body>

</html>